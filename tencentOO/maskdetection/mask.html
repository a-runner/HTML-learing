<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>口罩检测</title>
    <style>
        button{
            height: 50px; width: 400px;color: blue;
            /*border: 1px solid blueviolet;*/
            font-size: 20px;
            text-align: center;
            position: center;
            background-color: aqua;
        }
        .div2{
            width: 600px;
            height: 600px;
            border: 5px dotted palevioletred;
        }
        button:hover{
            background-color: bisque;
        }
    </style>
</head>
<body>
<!--<div class="div1">-->
<!--    装图片-->
<!--    <div class="div2">-->

<!--    </div>-->
<!--    上传图片：<input type="file" value="选择文件" name="file">  未选择任何文件夹<br><br>-->


<!--    <button type="submit" id="bb">开始检测</button>-->
<!--</div>-->
<div id="result" class="div2">

</div>
<!--<form action="./mask.html" method="post" id="uploadPicForm" enctype="multipart/form-data">-->

    <input type="file" name="fileDemo" id="fileDemo" />
    <input type="button" value="readAsDataURL" id="readAsDataURL" onclick="showDataByURL();"/>
<!--    <input type="button" value="readAsBinaryString"  id="readAsBinaryString" onclick="showDataByBinaryString();"/>-->
<!--    <input type="button" value="readAsText"  id="readAsText" onclick="showDataByText();"/>-->
    <button type="submit" id="bb">开始检测</button>
<!--    <input type="submit" value="提交" />-->


<!--</form>-->
</body>
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.js"></script>
<script src="js/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        if(typeof FileReader == "undified") {
            alert("您老的浏览器不行了！");
        }
        function showDataByURL() {
            var resultFile = document.getElementById("fileDemo").files[0];
            if (resultFile) {
                var reader = new FileReader();
                reader.readAsDataURL(resultFile);
                reader.onload = function (e) {
                    var urlData = this.result;
                    document.getElementById("result").innerHTML += "<img src='" + urlData + "' alt='" + resultFile.name + "' />";
                    document.getElementById("result").style.backgroundSize="contain";
                }
            }
        }
        function showDataByBinaryString() {
              var resultFile = document.getElementById("fileDemo").files[0];
            if (resultFile) {
                var reader = new FileReader();
                //异步方式，不会影响主线程
                reader.readAsBinaryString(resultFile);

                reader.onload = function(e) {
                    var urlData = this.result;
                    document.getElementById("result").innerHTML += urlData;
                };
            }
        }
        function showDataByText() {
            var resultFile = document.getElementById("fileDemo").files[0];
            if (resultFile) {
                var reader = new FileReader();

                reader.readAsText(resultFile, 'UTF-8');
                reader.onload = function (e) {
                    var urlData = this.result;
                    document.getElementById("result").innerHTML += urlData;
                };
            }
        }

        // 点击开始检测
        $('#bb').click(
            function () {
                // form = document.getElementById("uploadPicForm");
                var fileObj = $("#fileDemo")[0].files[0];
                var form = new FormData();
                form.append("k1", "v1");
                form.append("fileDemo", fileObj);
                // formData.append("fileDemo",form);
                // AJAX
                $.ajax({
                    'url':'http://127.0.0.1:8800/',
                    "type":'post',
                    "data":form,
                    // dataType: "json",
                    // async: false,
                    // cache: false,
                    contentType: false,
                    processData: false,
                    success: function (returndata) {
        	            if(returndata){
        		            // $("#url").val(returndata.data);
        		            alert('成功');
        	            }
                    },
                    error: function (returndata) {
        	            // alert(returndata.msg);
                        alert("上传失败");
                    }
                })
            }
        )
    </script>
</html>